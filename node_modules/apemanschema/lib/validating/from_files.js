/**
 * @function _validators
 */

'use strict'

const fs = require('fs')
const path = require('path')
const aschema = require('aschema')
const { pascalcase } = require('stringcase')

/** @lends _validators */
function _validators (dirname) {
  let validators = {}
  fs.readdirSync(dirname)
    .filter((name) => !/^index\./.test(name))
    .filter((name) => !/^\./.test(name))
    .filter((name) => !/^_/.test(name))
    .map((filename) =>
      path.resolve(dirname, filename)
    )
    .forEach((filename) => {
      let basename = path.basename(filename, path.extname(filename))
      basename = basename.split(/\./g).shift()
      validators[ pascalcase(basename) ] = aschema(require(filename))
    })
  return validators
}

module.exports = _validators
