/**
 * Test case for apemanschema.
 * Runs with mocha.
 */
'use strict'

const apemanschema = require('../lib/apemanschema.js')
const assert = require('assert')

describe('apemanschema', () => {
  it('Apemanschema', (done) => {
    let schema = apemanschema(`${__dirname}/../misc/mocks/mock-schemas`)
    let { errors } = schema('product').validate({
      id: 3
    })
    let [ error ] = errors
    assert.ok(error.message)
    done()
  })

  it('Create clone', (done) => {
    let schema = apemanschema(`${__dirname}/../misc/mocks/mock-schemas`)
    let product = schema('product').clone().toJSON()
    assert.equal(product.title, 'Product')
    done()
  })

  it('Set values', (done) => {
    let schema = apemanschema(`${__dirname}/../misc/mocks/mock-schemas`)
    let product = schema('product').clone()
    product.set({
      title: 'Product2'
    })
    assert.equal(product.title, 'Product2')
    done()
  })
})

/* global describe, it */
